# Prompts 구조 검토 보고서

## 검토 대상
- 디렉토리: `src/prompts/`
- 검토 일자: 2024년
- 검토 범위: 프롬프트 파일 구조, 템플릿 관리, 변수 사용

---

## ✅ 정상 동작 부분

### 1. 디렉토리 구조
- ✅ 명확한 하위 디렉토리 구조:
  - `classification/`: 사건 분류 프롬프트
  - `entity_extraction/`: 엔티티 추출 프롬프트
  - `fact_emotion/`: 사실/감정 분리 프롬프트
  - `summary/`: 요약 프롬프트
- ✅ 각 디렉토리별로 목적이 명확함

### 2. 파일 명명 규칙
- ✅ 일관된 파일명 규칙: `{case_type}_{sub_type}.txt` 형식
- ✅ 확장자 통일: `.txt` 사용
- ✅ 소문자와 언더스코어 사용

### 3. 문서화
- ✅ `summary/README.md` 파일 존재
- ✅ 파일 구조 및 사용 방법 설명

### 4. 프롬프트 템플릿 구조
- ✅ 변수 사용: `{variable_name}` 형식
- ✅ 명확한 지시사항
- ✅ JSON 형식 출력 요구사항 명시

---

## ⚠️ 발견된 문제점

### 1. 🟢 **낮음**: 일부 디렉토리에 README 부재

**문제**: `summary/` 디렉토리에는 `README.md`가 있지만, 다른 디렉토리(`classification/`, `entity_extraction/`, `fact_emotion/`)에는 README가 없습니다.

**영향도**: 낮음  
**수정 권장**: 각 디렉토리에 README 추가 (선택적)

---

### 2. 🟢 **낮음**: 변수 문서화 불완전

**문제**: `summary/README.md`에는 변수 목록이 있지만, 다른 디렉토리의 프롬프트에서 사용하는 변수에 대한 문서가 없습니다.

**영향도**: 낮음  
**수정 권장**: 각 디렉토리별 변수 문서화 (선택적)

---

### 3. 🟢 **낮음**: 프롬프트 템플릿 검증 부재

**문제**: 프롬프트 템플릿 파일의 변수 사용이 올바른지 검증하는 메커니즘이 없습니다. 예를 들어, `{undefined_variable}` 같은 변수가 있으면 런타임에만 발견됩니다.

**영향도**: 낮음  
**수정 권장**: 프롬프트 템플릿 검증 스크립트 추가 (선택적)

---

### 4. 🟢 **낮음**: 프롬프트 템플릿 버전 관리

**문제**: 프롬프트 템플릿의 버전이나 변경 이력이 추적되지 않습니다.

**영향도**: 낮음  
**수정 권장**: 버전 관리 또는 변경 이력 문서화 (선택적)

---

### 5. 🟢 **낮음**: 프롬프트 템플릿 예시 부족

**문제**: 각 프롬프트 템플릿에 대한 사용 예시나 샘플이 없습니다.

**영향도**: 낮음  
**수정 권장**: README에 사용 예시 추가 (선택적)

---

### 6. 🟢 **낮음**: 중복 프롬프트 가능성

**문제**: `entity_extraction/` 디렉토리에 `all_entities.txt`가 있는데, 개별 엔티티 추출 프롬프트(`date.txt`, `amount.txt`, `party.txt`, `action.txt`)와의 관계가 명확하지 않습니다.

**영향도**: 낮음  
**수정 권장**: README에 설명 추가 (선택적)

---

## 📊 검토 요약

### 발견된 문제
- 🟢 **낮음**: 6개 (README 부재, 변수 문서화, 템플릿 검증, 버전 관리, 예시 부족, 중복 프롬프트)

### 우선순위별 수정 권장
1. 🟢 **낮음**: 각 디렉토리에 README 추가 (선택적)
2. 🟢 **낮음**: 변수 문서화 보완 (선택적)
3. 🟢 **낮음**: 프롬프트 템플릿 검증 스크립트 (선택적)
4. 🟢 **낮음**: 사용 예시 추가 (선택적)
5. 🟢 **낮음**: 버전 관리 (선택적)
6. 🟢 **낮음**: 중복 프롬프트 관계 설명 (선택적)

---

## 🔧 수정 제안

### 수정 1: 각 디렉토리에 README 추가

#### `src/prompts/classification/README.md`
```markdown
# 사건 분류 프롬프트

이 디렉토리에는 법률 사건 유형을 분류하기 위한 프롬프트 템플릿이 저장됩니다.

## 파일
- `case_classification.txt`: 사건 유형 분류 프롬프트

## 변수
- `{user_input}`: 사용자 입력 텍스트

## 출력 형식
JSON 형식:
```json
{
    "main_case_type": "민사/형사/가사/행정",
    "sub_case_type": "세부 유형"
}
```
```

#### `src/prompts/entity_extraction/README.md`
```markdown
# 엔티티 추출 프롬프트

이 디렉토리에는 텍스트에서 엔티티(날짜, 금액, 당사자, 행위 등)를 추출하기 위한 프롬프트 템플릿이 저장됩니다.

## 파일
- `date.txt`: 날짜 추출 프롬프트
- `amount.txt`: 금액 추출 프롬프트
- `party.txt`: 당사자 추출 프롬프트
- `action.txt`: 행위 추출 프롬프트
- `all_entities.txt`: 모든 엔티티를 한 번에 추출하는 프롬프트

## 변수
- `{text}`: 분석할 텍스트

## 출력 형식
각 프롬프트마다 다른 형식:
- `date.txt`: YYYY-MM-DD 형식 또는 "null"
- `amount.txt`: 숫자 또는 "null"
- `party.txt`: 당사자 정보 JSON
- `action.txt`: 행위 정보 JSON
- `all_entities.txt`: 모든 엔티티를 포함한 JSON
```

#### `src/prompts/fact_emotion/README.md`
```markdown
# 사실/감정 분리 프롬프트

이 디렉토리에는 사용자 입력에서 사실과 감정을 분리하기 위한 프롬프트 템플릿이 저장됩니다.

## 파일
- `split.txt`: 사실/감정 분리 프롬프트

## 변수
- `{user_input}`: 사용자 입력 텍스트

## 출력 형식
JSON 형식:
```json
{
    "facts": "객관적 사실",
    "emotions": ["감정1", "감정2"]
}
```
```

---

## ✅ 결론

`src/prompts/` 디렉토리는 전반적으로 잘 구성되어 있습니다. **각 디렉토리에 README 추가**와 **변수 문서화 보완**을 권장합니다.

**우선순위**:
1. 🟢 **낮음**: 각 디렉토리에 README 추가 (선택적)
2. 🟢 **낮음**: 변수 문서화 보완 (선택적)
3. 🟢 **낮음**: 프롬프트 템플릿 검증 스크립트 (선택적)
4. 🟢 **낮음**: 사용 예시 추가 (선택적)
5. 🟢 **낮음**: 버전 관리 (선택적)
6. 🟢 **낮음**: 중복 프롬프트 관계 설명 (선택적)

**참고**: 현재 구조는 기능적으로 문제가 없으며, 문서화 개선은 선택 사항입니다.

